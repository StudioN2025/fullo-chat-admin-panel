<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FulloChat Admin Panel</title>
    <link rel="stylesheet" href="css/admin.css">
    <!-- Chart.js –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <div class="admin-container">
        <!-- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è -->
        <div id="authContainer" class="auth-container">
            <div class="admin-logo">
                <h1>üëë FulloChat Admin</h1>
                <p>–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</p>
            </div>
            
            <div id="errorMessage" class="error-message"></div>
            <div id="successMessage" class="success-message"></div>
            
            <div class="input-group">
                <input type="email" id="emailInput" placeholder="Email –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞" autocomplete="email">
            </div>
            <div class="input-group">
                <input type="password" id="passwordInput" placeholder="–ü–∞—Ä–æ–ª—å" autocomplete="current-password">
            </div>
            
            <button onclick="adminAuth.login()">–í–æ–π—Ç–∏ –≤ –ø–∞–Ω–µ–ª—å</button>
            
            <div class="info-text">
                <p>–¢–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤</p>
                <p class="small">–î–æ—Å—Ç—É–ø –∏–º–µ—é—Ç —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏,<br>–¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –≤ —Å–ø–∏—Å–æ–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤</p>
            </div>
        </div>

        <!-- –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å -->
        <div id="adminPanel" class="admin-panel hidden">
            <div class="admin-header">
                <div class="header-left">
                    <h2>üëë FulloChat Admin</h2>
                    <span class="admin-badge">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</span>
                </div>
                <div class="header-right">
                    <span id="adminEmail" class="admin-email"></span>
                    <button onclick="adminAuth.logout()" class="logout-btn">–í—ã–π—Ç–∏</button>
                </div>
            </div>

            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üë•</div>
                    <div class="stat-info">
                        <span class="stat-label">–í—Å–µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–æ–≤</span>
                        <span class="stat-value" id="totalUsers">0</span>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">üü¢</div>
                    <div class="stat-info">
                        <span class="stat-label">–°–µ–π—á–∞—Å –æ–Ω–ª–∞–π–Ω</span>
                        <span class="stat-value" id="onlineNow">0</span>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">üè†</div>
                    <div class="stat-info">
                        <span class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç</span>
                        <span class="stat-value" id="activeRooms">0</span>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">üî®</div>
                    <div class="stat-info">
                        <span class="stat-label">–ó–∞–±–∞–Ω–µ–Ω–æ</span>
                        <span class="stat-value" id="bannedUsers">0</span>
                    </div>
                </div>
            </div>

            <!-- –ì—Ä–∞—Ñ–∏–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ -->
            <div class="charts-grid">
                <div class="chart-card">
                    <h3>–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∑–∞ 24 —á–∞—Å–∞</h3>
                    <canvas id="activityChart"></canvas>
                </div>
                <div class="chart-card">
                    <h3>–ö–æ–º–Ω–∞—Ç—ã –æ–Ω–ª–∞–π–Ω</h3>
                    <canvas id="roomsChart"></canvas>
                </div>
            </div>

            <!-- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
            <div class="users-section">
                <div class="section-header">
                    <h3>üë• –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ FulloChat</h3>
                    <div class="search-box">
                        <input type="text" id="searchUser" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ email –∏–ª–∏ –∏–º–µ–Ω–∏...">
                    </div>
                </div>
                
                <div class="table-container">
                    <table id="usersTable">
                        <thead>
                            <tr>
                                <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                                <th>Email</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                                <th>–í —Å–µ—Ç–∏</th>
                                <th>–ö–æ–º–Ω–∞—Ç–∞</th>
                                <th>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="usersTableBody">
                            <tr>
                                <td colspan="7" class="loading-row">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç -->
            <div class="rooms-section">
                <div class="section-header">
                    <h3>üè† –ê–∫—Ç–∏–≤–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã</h3>
                </div>
                
                <div class="table-container">
                    <table id="roomsTable">
                        <thead>
                            <tr>
                                <th>–ö–æ–¥ –∫–æ–º–Ω–∞—Ç—ã</th>
                                <th>–°–æ–∑–¥–∞—Ç–µ–ª—å</th>
                                <th>–£—á–∞—Å—Ç–Ω–∏–∫–æ–≤</th>
                                <th>–°–æ–∑–¥–∞–Ω–∞</th>
                                <th>–ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="roomsTableBody">
                            <tr>
                                <td colspan="6" class="loading-row">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- –°–ø–∏—Å–æ–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ -->
            <div class="admins-section">
                <div class="section-header">
                    <h3>üëë –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã</h3>
                    <div class="admin-controls">
                        <button onclick="adminDashboard.showAddAdminModal()" class="add-admin-btn">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</button>
                    </div>
                </div>
                
                <div class="table-container">
                    <table id="adminsTable">
                        <thead>
                            <tr>
                                <th>Email</th>
                                <th>–î–æ–±–∞–≤–ª–µ–Ω</th>
                                <th>–î–æ–±–∞–≤–∏–ª</th>
                                <th>–°—É–ø–µ—Ä-–∞–¥–º–∏–Ω</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="adminsTableBody">
                            <tr>
                                <td colspan="5" class="loading-row">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- –õ–æ–≥–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
            <div class="logs-section">
                <div class="section-header">
                    <h3>üìã –õ–æ–≥–∏ –¥–µ–π—Å—Ç–≤–∏–π</h3>
                    <button onclick="adminDashboard.refreshLogs()" class="refresh-btn">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
                </div>
                
                <div class="table-container">
                    <table id="logsTable">
                        <thead>
                            <tr>
                                <th>–í—Ä–µ–º—è</th>
                                <th>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</th>
                                <th>–î–µ–π—Å—Ç–≤–∏–µ</th>
                                <th>–¶–µ–ª—å</th>
                                <th>IP</th>
                            </tr>
                        </thead>
                        <tbody id="logsTableBody">
                            <tr>
                                <td colspan="5" class="loading-row">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ -->
    <div id="addAdminModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‚ûï –î–æ–±–∞–≤–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h3>
                <button onclick="adminDashboard.hideAddAdminModal()" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <p>–í–≤–µ–¥–∏—Ç–µ email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º.</p>
                <p class="warning">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ FulloChat!</p>
                
                <div class="input-group">
                    <input type="email" id="newAdminEmail" placeholder="Email –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞">
                </div>
                
                <div class="checkbox-group">
                    <label>
                        <input type="checkbox" id="superAdminCheckbox"> –°–¥–µ–ª–∞—Ç—å —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
                    </label>
                    <p class="hint">–°—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å/—É–¥–∞–ª—è—Ç—å –¥—Ä—É–≥–∏—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤</p>
                </div>
                
                <div id="modalError" class="error-message"></div>
            </div>
            <div class="modal-footer">
                <button onclick="adminDashboard.hideAddAdminModal()" class="cancel-btn">–û—Ç–º–µ–Ω–∞</button>
                <button onclick="adminDashboard.addAdmin()" class="confirm-btn">–î–æ–±–∞–≤–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <!-- –ù–∞—à–∏ —Å–∫—Ä–∏–ø—Ç—ã -->
    <script src="js/firebase-config.js"></script>
    <script src="js/admin-auth.js"></script>
    <script src="js/admin-dashboard.js"></script>
</body>
</html>
